<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Bubble Network Visualization</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #ffffff;
            overflow-x: hidden;
        }

        /* Glassmorphism Container */
        .glass-container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .header {
            padding: 3rem 2rem;
            text-align: center;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(135deg, #00ff88 0%, #00d4ff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .header p {
            font-size: 1.25rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
        }

        .viz-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .viz-section {
            padding: 2rem;
        }

        .viz-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            text-align: center;
            color: #00ff88;
        }

        #network-viz {
            width: 100%;
            height: 600px;
            border-radius: 16px;
            background: rgba(0, 0, 0, 0.2);
        }

        #consolidated-viz {
            width: 100%;
            height: 600px;
            border-radius: 16px;
            background: rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            padding: 1rem;
            border-radius: 12px;
            border: 1px solid rgba(0, 255, 136, 0.3);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
            max-width: 300px;
        }

        .tooltip.show {
            opacity: 1;
        }

        .tooltip-title {
            font-weight: 600;
            color: #00ff88;
            margin-bottom: 0.5rem;
        }

        .tooltip-content {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.5;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        .stat-card {
            padding: 1.5rem;
            text-align: center;
        }

        .stat-label {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #00ff88;
        }

        .consolidated-bubble {
            position: relative;
            text-align: center;
        }

        .bubble-label {
            font-size: 1.5rem;
            font-weight: 600;
            color: #00ff88;
            margin-top: 1rem;
        }

        .bubble-stats {
            margin-top: 1rem;
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.7);
        }

        @media (max-width: 1200px) {
            .viz-wrapper {
                grid-template-columns: 1fr;
            }
        }

        /* Pulsing animation for consolidated bubble */
        @keyframes pulse {
            0%, 100% {
                filter: drop-shadow(0 0 20px rgba(0, 255, 136, 0.5));
            }
            50% {
                filter: drop-shadow(0 0 40px rgba(0, 255, 136, 0.8));
            }
        }

        .pulse {
            animation: pulse 3s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>AI Bubble Network</h1>
        <p>Interactive visualization of the interconnected AI ecosystem</p>
    </div>

    <div class="container">
        <div class="viz-wrapper">
            <!-- Network Graph -->
            <div class="glass-container viz-section">
                <div class="viz-title">Individual Companies & Flows</div>
                <svg id="network-viz"></svg>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ff6b9d;"></div>
                        <span>Hardware</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #4ecdc4;"></div>
                        <span>Cloud/Services</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #00ff88;"></div>
                        <span>AI/Software</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ffd93d;"></div>
                        <span>Venture Capital</span>
                    </div>
                </div>
            </div>

            <!-- Consolidated View -->
            <div class="glass-container viz-section">
                <div class="viz-title">Consolidated AI Bubble</div>
                <div id="consolidated-viz">
                    <svg id="consolidated-svg"></svg>
                </div>
            </div>
        </div>

        <!-- Stats -->
        <div class="glass-container stats-grid">
            <div class="stat-card">
                <div class="stat-label">Total Companies</div>
                <div class="stat-value">15</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Enterprise Value</div>
                <div class="stat-value">$8.28T</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Outside Revenue</div>
                <div class="stat-value">$494B</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">EV/Revenue</div>
                <div class="stat-value">16.75x</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Internal Flows</div>
                <div class="stat-value">$27.5B</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Top 2 Concentration</div>
                <div class="stat-value">84%</div>
            </div>
        </div>
    </div>

    <div class="tooltip" id="tooltip">
        <div class="tooltip-title"></div>
        <div class="tooltip-content"></div>
    </div>

    <script>
        // Data
        const nodes = [
            { id: "Nvidia", type: "hardware", ev: 3100, revenue: 90, x: 400, y: 400 },
            { id: "Microsoft", type: "cloud", ev: 3850, revenue: 275, x: 400, y: 100 },
            { id: "OpenAI", type: "ai", ev: 300, revenue: 12, x: 200, y: 250 },
            { id: "Oracle", type: "cloud", ev: 420, revenue: 56, x: 600, y: 500 },
            { id: "AMD", type: "hardware", ev: 290, revenue: 29, x: 100, revenue: 400 },
            { id: "Intel", type: "hardware", ev: 145, revenue: 54, x: 700, y: 400 },
            { id: "CoreWeave", type: "cloud", ev: 70, revenue: 3, x: 600, y: 200 },
            { id: "Nebius", type: "cloud", ev: 28, revenue: 0.584, x: 500, y: 100 },
            { id: "xAI", type: "ai", ev: 50, revenue: 0.8, x: 450, y: 550 },
            { id: "Figure AI", type: "ai", ev: 3.5, revenue: 0.15, x: 300, y: 500 },
            { id: "Mistral", type: "ai", ev: 6, revenue: 0.3, x: 250, y: 480 },
            { id: "Anysphere", type: "ai", ev: 9.9, revenue: 0.5, x: 150, y: 300 },
            { id: "Ambience", type: "ai", ev: 1, revenue: 0.08, x: 100, y: 200 },
            { id: "Harvey", type: "ai", ev: 1.5, revenue: 0.12, x: 120, y: 150 },
            { id: "Nscale", type: "ai", ev: 0.5, revenue: 0.05, x: 180, y: 430 }
        ];

        const links = [
            { source: "Microsoft", target: "OpenAI", value: 13, type: "investment" },
            { source: "Microsoft", target: "Nvidia", value: 7, type: "hardware" },
            { source: "OpenAI", target: "Microsoft", value: 2.5, type: "cloud" },
            { source: "OpenAI", target: "CoreWeave", value: 2.5, type: "cloud" },
            { source: "OpenAI", target: "Oracle", value: 1.5, type: "cloud" },
            { source: "OpenAI", target: "Nvidia", value: 1.5, type: "hardware" },
            { source: "Oracle", target: "Nvidia", value: 3.5, type: "hardware" },
            { source: "Oracle", target: "OpenAI", value: 0.3, type: "cloud" },
            { source: "CoreWeave", target: "Nvidia", value: 2.5, type: "hardware" },
            { source: "Nebius", target: "Nvidia", value: 1.5, type: "hardware" },
            { source: "Microsoft", target: "Nebius", value: 17.4, type: "contract" },
            { source: "xAI", target: "Nvidia", value: 4, type: "hardware" },
            { source: "Mistral", target: "Nvidia", value: 0.2, type: "hardware" },
            { source: "Figure AI", target: "Nvidia", value: 0.3, type: "hardware" },
            { source: "Nvidia", target: "AMD", value: 0.1, type: "other" },
            { source: "Microsoft", target: "Intel", value: 0.5, type: "hardware" }
        ];

        const typeColors = {
            hardware: "#ff6b9d",
            cloud: "#4ecdc4",
            ai: "#00ff88",
            vc: "#ffd93d"
        };

        // Network Visualization
        const width = 700;
        const height = 600;

        const svg = d3.select("#network-viz")
            .attr("width", width)
            .attr("height", height);

        // Create force simulation
        const simulation = d3.forceSimulation(nodes)
            .force("link", d3.forceLink(links).id(d => d.id).distance(150))
            .force("charge", d3.forceManyBody().strength(-500))
            .force("center", d3.forceCenter(width / 2, height / 2))
            .force("collision", d3.forceCollide().radius(d => Math.sqrt(d.ev) * 2 + 10));

        // Create links
        const link = svg.append("g")
            .selectAll("line")
            .data(links)
            .join("line")
            .attr("stroke", d => {
                if (d.type === "investment") return "#ffd93d";
                if (d.type === "hardware") return "#ff6b9d";
                if (d.type === "cloud") return "#4ecdc4";
                return "#00ff88";
            })
            .attr("stroke-opacity", 0.6)
            .attr("stroke-width", d => Math.sqrt(d.value) * 0.5);

        // Create nodes
        const node = svg.append("g")
            .selectAll("g")
            .data(nodes)
            .join("g")
            .call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));

        node.append("circle")
            .attr("r", d => Math.sqrt(d.ev) * 2 + 5)
            .attr("fill", d => typeColors[d.type])
            .attr("stroke", "#fff")
            .attr("stroke-width", 2)
            .style("filter", "drop-shadow(0 0 10px rgba(0, 255, 136, 0.3))");

        node.append("text")
            .text(d => d.id)
            .attr("text-anchor", "middle")
            .attr("dy", d => Math.sqrt(d.ev) * 2 + 20)
            .attr("fill", "#fff")
            .attr("font-size", "12px")
            .attr("font-weight", "600");

        // Tooltip
        const tooltip = d3.select("#tooltip");

        node.on("mouseover", function(event, d) {
            tooltip.select(".tooltip-title").text(d.id);
            tooltip.select(".tooltip-content").html(`
                <strong>Type:</strong> ${d.type.charAt(0).toUpperCase() + d.type.slice(1)}<br>
                <strong>EV:</strong> $${d.ev >= 1 ? d.ev.toFixed(1) + 'B' : (d.ev * 1000).toFixed(0) + 'M'}<br>
                <strong>Revenue (2025):</strong> $${d.revenue >= 1 ? d.revenue.toFixed(1) + 'B' : (d.revenue * 1000).toFixed(0) + 'M'}
            `);
            tooltip.classed("show", true)
                .style("left", (event.pageX + 10) + "px")
                .style("top", (event.pageY - 10) + "px");
        })
        .on("mouseout", function() {
            tooltip.classed("show", false);
        });

        simulation.on("tick", () => {
            link
                .attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);

            node.attr("transform", d => `translate(${d.x},${d.y})`);
        });

        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }

        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }

        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }

        // Consolidated Bubble Visualization
        const consolidatedSvg = d3.select("#consolidated-svg")
            .attr("width", width)
            .attr("height", height);

        const consolidatedG = consolidatedSvg.append("g")
            .attr("transform", `translate(${width / 2}, ${height / 2})`);

        // Main bubble
        const mainBubble = consolidatedG.append("circle")
            .attr("r", 200)
            .attr("fill", "url(#gradient)")
            .attr("stroke", "#00ff88")
            .attr("stroke-width", 3)
            .style("filter", "drop-shadow(0 0 40px rgba(0, 255, 136, 0.6))")
            .attr("class", "pulse");

        // Gradient
        const defs = consolidatedSvg.append("defs");
        const gradient = defs.append("radialGradient")
            .attr("id", "gradient");
        gradient.append("stop")
            .attr("offset", "0%")
            .attr("stop-color", "rgba(0, 255, 136, 0.3)");
        gradient.append("stop")
            .attr("offset", "100%")
            .attr("stop-color", "rgba(0, 212, 255, 0.1)");

        // Inner circles for top companies
        const topCompanies = [
            { name: "Microsoft", ev: 3850, angle: 0, color: "#4ecdc4" },
            { name: "Nvidia", ev: 3100, angle: 120, color: "#ff6b9d" },
            { name: "Oracle", ev: 420, angle: 240, color: "#4ecdc4" }
        ];

        topCompanies.forEach(company => {
            const radius = 80;
            const angle = (company.angle * Math.PI) / 180;
            const x = Math.cos(angle) * radius;
            const y = Math.sin(angle) * radius;
            const size = Math.sqrt(company.ev) / 10;

            consolidatedG.append("circle")
                .attr("cx", x)
                .attr("cy", y)
                .attr("r", size)
                .attr("fill", company.color)
                .attr("fill-opacity", 0.6)
                .attr("stroke", company.color)
                .attr("stroke-width", 2);

            consolidatedG.append("text")
                .attr("x", x)
                .attr("y", y + size + 15)
                .attr("text-anchor", "middle")
                .attr("fill", "#fff")
                .attr("font-size", "11px")
                .attr("font-weight", "600")
                .text(company.name);
        });

        // Title
        consolidatedG.append("text")
            .attr("y", -220)
            .attr("text-anchor", "middle")
            .attr("fill", "#00ff88")
            .attr("font-size", "24px")
            .attr("font-weight", "700")
            .text("Consolidated AI Bubble");

        // Stats inside bubble
        consolidatedG.append("text")
            .attr("y", 0)
            .attr("text-anchor", "middle")
            .attr("fill", "#fff")
            .attr("font-size", "36px")
            .attr("font-weight", "700")
            .text("$8.28T");

        consolidatedG.append("text")
            .attr("y", 30)
            .attr("text-anchor", "middle")
            .attr("fill", "rgba(255, 255, 255, 0.7)")
            .attr("font-size", "14px")
            .text("Enterprise Value");

        consolidatedG.append("text")
            .attr("y", 60)
            .attr("text-anchor", "middle")
            .attr("fill", "#00ff88")
            .attr("font-size", "24px")
            .attr("font-weight", "700")
            .text("16.75x");

        consolidatedG.append("text")
            .attr("y", 85)
            .attr("text-anchor", "middle")
            .attr("fill", "rgba(255, 255, 255, 0.7)")
            .attr("font-size", "14px")
            .text("EV/Revenue");

        // Bottom stats
        consolidatedG.append("text")
            .attr("y", 240)
            .attr("text-anchor", "middle")
            .attr("fill", "rgba(255, 255, 255, 0.7)")
            .attr("font-size", "12px")
            .text("Outside Revenue: $494.1B");

        consolidatedG.append("text")
            .attr("y", 260)
            .attr("text-anchor", "middle")
            .attr("fill", "rgba(255, 255, 255, 0.7)")
            .attr("font-size", "12px")
            .text("Internal Flows: $27.5B (5.3%)");
    </script>
</body>
</html>

